<nz-card nzTitle="Kelola Akun" class="admin-card">
  <button nz-button nzType="primary" (click)="openAddModal()">
    Tambah Akun
  </button>

  <nz-table [nzBordered]="true" [nzData]="users" class="admin-table">
    <thead>
      <tr>
        <th>Username</th>
        <th>Role</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.username }}</td>
        <td>{{ user.role | titlecase }}</td>
        <td>
          <button
            nz-button
            nzType="default"
            nzSize="small"
            (click)="openEditModal(user)"
          >
            Edit
          </button>
          <button
            nz-button
            nzType="default"
            nzDanger
            nzSize="small"
            (click)="deleteUser(user)"
          >
            Hapus
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>

  <!-- Modal Add/Edit -->
  <nz-modal
    [(nzVisible)]="isModalVisible"
    nzTitle="{{ modalTitle }}"
    (nzOnCancel)="closeModal()"
    (nzOnOk)="saveUser()"
  >
    <form nz-form [nzLayout]="'vertical'">
      <nz-form-item>
        <nz-form-label>Username</nz-form-label>
        <nz-form-control>
          <input
            nz-input
            [(ngModel)]="currentUser.username"
            name="username"
            required
          />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label>Password</nz-form-label>
        <nz-form-control>
          <input
            nz-input
            type="password"
            [(ngModel)]="currentUser.password"
            name="password"
            required
          />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label>Role</nz-form-label>
        <nz-form-control>
          <nz-select [(ngModel)]="currentUser.role" name="role">
            <nz-option nzValue="pengguna" nzLabel="Pengguna"></nz-option>
            <nz-option nzValue="pegawai" nzLabel="Pegawai"></nz-option>
            <nz-option nzValue="admin" nzLabel="Admin"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </form>
  </nz-modal>
</nz-card>
